(this.webpackJsonpe_zonets=this.webpackJsonpe_zonets||[]).push([[9],{156:function(e,r,t){"use strict";t.d(r,"b",(function(){return u})),t.d(r,"a",(function(){return n}));t(0);var n,s=t(158),a=t.n(s),o=t(53),c=t(149),i=t(1);!function(e){e[e.onlyInformationType=0]="onlyInformationType",e[e.forBasket=1]="forBasket"}(n||(n={}));var u=function(e){var r=e.modalText,t=e.buttonText,s=e.switchShowPopap,u=e.handler,d=e.type,l=Object(c.a)().t;return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:a.a.modal,children:[Object(i.jsx)("p",{className:a.a.modalText,children:r}),Object(i.jsx)(o.b,{onClick:function(){s(),u()},colorScheme:o.a.blue,className:a.a.buttonOffset,children:t}),d===n.forBasket&&Object(i.jsx)(o.b,{colorScheme:o.a.lightgreen,className:a.a.buttonOffset,onClick:s,children:l("i18next.modalwindow.cancel")})]}),Object(i.jsx)("div",{className:a.a.overlay})]})}},158:function(e,r,t){e.exports={modal:"style_modal__K5xBK",buttonOffset:"style_buttonOffset__1106E",overlay:"style_overlay__3brN4"}},177:function(e,r,t){e.exports={form:"style_form__3TMWT",formTitle:"style_formTitle__150nd",buttonOffset:"style_buttonOffset__134Pb",formText:"style_formText__23ts5",cancelLink:"style_cancelLink__3NqKS"}},225:function(e,r,t){"use strict";t.r(r),t.d(r,"RecoverPasswordStep",(function(){return s}));var n,s,a=t(17),o=t(21),c=t(0),i=t(25),u=t.n(i),d=t(30),l=t(20),p=t(177),b=t.n(p),f=t(23),m=t(7),v=t(63),j=function(){var e=Object(d.a)(u.a.mark((function e(r,t,n){var s,a,o,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.code,e.prev=1,e.next=4,Object(v.a)({method:"POST",url:"/recover/password/confirm",data:{code:s}});case 4:(null===(o=e.sent)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.message)&&t({type:"next"}),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{code:2===(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(i=c.data)||void 0===i?void 0:i.code)&&n("i18next.recoverpassword.confirm.errorcode2")});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(r,t,n){return e.apply(this,arguments)}}(),x=t(155),w=t(149),O=t(1),h=t(6),_=t(9),T=function(){var e=Object(d.a)(u.a.mark((function e(r,t,n,s){var a,o,c,i,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.password,e.prev=1,e.next=4,Object(v.a)({method:"POST",url:"/recover/password/final",data:{password:a}});case 4:(null===(c=e.sent)||void 0===c||null===(o=c.data)||void 0===o?void 0:o.message)&&(t(s("i18next.recoverpassword.final.success")),n()),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{password:null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i||null===(d=i.data)||void 0===d?void 0:d.error});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(r,t,n,s){return e.apply(this,arguments)}}(),S=t(81),y=t(28),N=t(156),g=t(22),P=t(5),k=(Object(P.b)(g.b.INPUT.FORM_EMAIL_CHANGE),Object(P.b)(g.b.INPUT.SET_ERROR),function(){var e=Object(d.a)(u.a.mark((function e(r,t,n){var s,a,o,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.email,e.prev=1,e.next=4,Object(v.a)({method:"POST",url:"/recover/password",data:{email:s}});case 4:(null===(o=e.sent)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.message)&&t({type:"next"}),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{email:1===(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(i=c.data)||void 0===i?void 0:i.code)&&n("i18next.recoverpassword.input.errorcode1")});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(r,t,n){return e.apply(this,arguments)}}());!function(e){e[e.INPUT_STEP=0]="INPUT_STEP",e[e.CONFIRM_STEP=1]="CONFIRM_STEP",e[e.FINAL_STEP=2]="FINAL_STEP"}(s||(s={}));var E=(n={},Object(o.a)(n,s.INPUT_STEP,{component:function(e){var r=e.setStep,t=Object(c.useRef)(),n=Object(w.a)().t;function s(){return(s=Object(d.a)(u.a.mark((function e(t){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=t.email)){e.next=5;break}return e.abrupt("return",k({email:s},r,n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){t.current&&t.current.focus()}),[t.current]),Object(O.jsx)(x.b,{onSubmit:function(e){return s.apply(this,arguments)},validate:function(e){var r={};return e.email||(r.email=n("i18next.recoverpassword.input.erroremailisrequired")),r},subscription:{submitting:!0},render:function(e){var r=e.handleSubmit;return Object(O.jsxs)("form",{className:b.a.form,onSubmit:r,children:[Object(O.jsx)("h3",{className:b.a.formTitle,children:n("i18next.recoverpassword.input.title")}),Object(O.jsx)("p",{className:b.a.formText,children:n("i18next.recoverpassword.input.informtext")}),Object(O.jsx)(x.c,{subscription:{submitting:!0},render:function(e){var r=e.submitting;return Object(O.jsx)(x.a,{name:"email",component:l.h,inputRef:t,label:n("i18next.recoverpassword.input.youremail"),id:"email-input",placeholder:n("i18next.recoverpassword.input.enteremail"),disabled:r})}}),Object(O.jsx)(x.c,{subscription:{pristine:!0,errors:!0,submitting:!0},render:function(e){var r=e.pristine,t=e.errors,s=e.submitting;return Object(O.jsx)(l.b,{colorScheme:l.c.green,className:b.a.buttonOffset,type:"submit",disabled:r||(null===t||void 0===t?void 0:t.email)||s,loading:s,children:n("i18next.recoverpassword.input.continue")})}}),Object(O.jsx)(f.b,{to:m.a.login.url,className:b.a.cancelLink,children:n("i18next.recoverpassword.input.cancel")})]})}})},next:s.CONFIRM_STEP}),Object(o.a)(n,s.CONFIRM_STEP,{component:function(e){var r=e.setStep,t=Object(c.useRef)(),n=Object(w.a)().t;function s(){return(s=Object(d.a)(u.a.mark((function e(t){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=t.code)){e.next=5;break}return e.abrupt("return",j({code:s},r,n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){t.current&&t.current.focus()}),[t.current]),Object(O.jsx)(x.b,{onSubmit:function(e){return s.apply(this,arguments)},subscription:{submitting:!0},validate:function(e){var r={};return e.code||(r.code=n("i18next.recoverpassword.confirm.errorecodeisrequired")),r},render:function(e){var r=e.handleSubmit;return Object(O.jsxs)("form",{className:b.a.form,onSubmit:r,children:[Object(O.jsx)("h3",{className:b.a.formTitle,children:n("i18next.recoverpassword.confirm.confirmation")}),Object(O.jsx)("p",{className:b.a.formText,children:n("i18next.recoverpassword.confirm.informtext")}),Object(O.jsx)(x.c,{subscription:{submitting:!0},render:function(e){var r=e.submitting;return Object(O.jsx)(x.a,{name:"code",component:l.h,inputRef:t,label:n("i18next.recoverpassword.confirm.code"),id:"code-input",placeholder:n("i18next.recoverpassword.confirm.entercode"),type:"number",disabled:r})}}),Object(O.jsx)(x.c,{subscription:{pristine:!0,submitting:!0,errors:!0},render:function(e){var r=e.pristine,t=e.submitting,s=e.errors;return Object(O.jsx)(l.b,{colorScheme:l.c.green,className:b.a.buttonOffset,type:"submit",disabled:r||(null===s||void 0===s?void 0:s.code)||t,loading:t,children:n("i18next.recoverpassword.confirm.continue")})}}),Object(O.jsx)(f.b,{to:m.a.login.url,className:b.a.cancelLink,children:n("i18next.recoverpassword.confirm.cancel")})]})}})},next:s.FINAL_STEP}),Object(o.a)(n,s.FINAL_STEP,{component:function(){var e=Object(c.useRef)(),r=Object(w.a)().t,t=Object(c.useState)(!1),n=Object(a.a)(t,2),s=n[0],o=n[1],i=Object(c.useState)(""),p=Object(a.a)(i,2),v=p[0],j=p[1],g=Object(_.c)(y.c.finalStage.needRedirect),P=Object(_.b)();function k(){return(k=Object(d.a)(u.a.mark((function e(t){var n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.password,s=t.repeatPassword,!n||n!==s){e.next=3;break}return e.abrupt("return",T({password:n},j,E,r));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(Object(c.useEffect)((function(){e.current&&e.current.focus()}),[e.current]),Object(c.useEffect)((function(){return function(){P(Object(S.b)())}}),[]),g)return Object(O.jsx)(h.a,{to:m.a.login.url});function E(){o(!s)}return Object(O.jsxs)(O.Fragment,{children:[s&&Object(O.jsx)(N.b,{buttonText:"Ok",modalText:v,switchShowPopap:E,handler:function(){E(),P(Object(S.c)())},type:N.a.onlyInformationType}),Object(O.jsx)(x.b,{onSubmit:function(e){return k.apply(this,arguments)},validate:function(e){var t={};return e.password||(t.password=r("i18next.recoverpassword.final.errorpasswordisrequired")),e.repeatPassword?e.password!==e.repeatPassword&&(t.repeatPassword=r("i18next.recoverpassword.final.errormismatchedpasswords")):t.repeatPassword=r("i18next.recoverpassword.final.errorrepeatpasswordisrequired"),e.password&&!/[!?\-&_*]/.test(e.password)&&(t.password="".concat(r("i18next.recoverpassword.final.erroratleastoneof")," !,?,-,&,_,*")),e.password&&/(.)\1{2}/.test(e.password)&&(t.password=r("i18next.recoverpassword.final.erroridenticalsymbols")),t},subscription:{submitting:!0},render:function(t){var n=t.handleSubmit;return Object(O.jsxs)("form",{className:b.a.form,onSubmit:n,children:[Object(O.jsx)("h3",{className:b.a.formTitle,children:r("i18next.recoverpassword.final.title")}),Object(O.jsx)("p",{className:b.a.formText,children:r("i18next.recoverpassword.final.informtext")}),Object(O.jsx)(x.c,{subscription:{submitting:!0},render:function(t){var n=t.submitting;return Object(O.jsx)(x.a,{component:l.h,name:"password",inputRef:e,label:r("i18next.recoverpassword.final.newpassword"),id:"password",placeholder:r("i18next.recoverpassword.final.enternewpassword"),type:"password",disabled:n})}}),Object(O.jsx)(x.c,{subscription:{submitting:!0},render:function(e){var t=e.submitting;return Object(O.jsx)(x.a,{component:l.h,name:"repeatPassword",label:r("i18next.recoverpassword.final.repeatnewpassword"),id:"repeat-password",placeholder:r("i18next.recoverpassword.final.enternewpassword"),type:"password",disabled:t})}}),Object(O.jsx)(x.c,{subscription:{pristine:!0,errors:!0,submitting:!0},render:function(e){var t=e.pristine,n=e.errors,s=e.submitting;return Object(O.jsx)(l.b,{colorScheme:l.c.green,className:b.a.buttonOffset,type:"submit",disabled:t||(null===n||void 0===n?void 0:n.password)||(null===n||void 0===n?void 0:n.repeatPassword)||s,loading:s,children:r("i18next.recoverpassword.final.continue")})}}),Object(O.jsx)(f.b,{to:m.a.login.url,className:b.a.cancelLink,children:r("i18next.recoverpassword.final.cancel")})]})}})]})}}),n);r.default=function(){var e=Object(c.useReducer)((function(e,r){switch(r.type){case"next":return E[e].next?E[e].next:e;default:return e}}),s.INPUT_STEP),r=Object(a.a)(e,2),t=r[0],n=r[1],o=E[t].component;return Object(O.jsx)(o,{setStep:n})}}}]);
//# sourceMappingURL=recover-password.a367f24d.chunk.js.map