(this.webpackJsonpe_zonets=this.webpackJsonpe_zonets||[]).push([[10],{156:function(e,t,r){"use strict";r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return n}));r(0);var n,i=r(158),a=r.n(i),s=r(53),o=r(149),c=r(1);!function(e){e[e.onlyInformationType=0]="onlyInformationType",e[e.forBasket=1]="forBasket"}(n||(n={}));var u=function(e){var t=e.modalText,r=e.buttonText,i=e.switchShowPopap,u=e.handler,l=e.type,d=Object(o.a)().t;return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:a.a.modal,children:[Object(c.jsx)("p",{className:a.a.modalText,children:t}),Object(c.jsx)(s.b,{onClick:function(){i(),u()},colorScheme:s.a.blue,className:a.a.buttonOffset,children:r}),l===n.forBasket&&Object(c.jsx)(s.b,{colorScheme:s.a.lightgreen,className:a.a.buttonOffset,onClick:i,children:d("i18next.modalwindow.cancel")})]}),Object(c.jsx)("div",{className:a.a.overlay})]})}},158:function(e,t,r){e.exports={modal:"style_modal__K5xBK",buttonOffset:"style_buttonOffset__1106E",overlay:"style_overlay__3brN4"}},194:function(e,t,r){e.exports={form:"style_form__3O1SZ",formTitle:"style_formTitle__3zJ71",buttonOffset:"style_buttonOffset__2RQ6Y",formText:"style_formText__3j0c4",cancelLink:"style_cancelLink__13uzr"}},228:function(e,t,r){"use strict";r.r(t),r.d(t,"RegistrationStep",(function(){return i}));var n,i,a=r(17),s=r(21),o=r(0),c=r(25),u=r.n(c),l=r(30),d=r(20),b=r(194),p=r.n(b),f=r(6),m=r(23),j=r(7),x=r(9),O=r(63),g=function(){var e=Object(l.a)(u.a.mark((function e(t,r,n,i){var a,s,o,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.code,e.prev=1,e.next=4,Object(O.a)({method:"POST",url:"/register/confirm",data:{code:a}});case 4:(null===(o=e.sent)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.message)&&(r(i("i18next.registration.confirm.success")),n()),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{code:2===(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.code)&&i("i18next.registration.confirm.errorcode2")||i("i18next.registration.confirm.unknownerror")});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r,n,i){return e.apply(this,arguments)}}(),h=r(80),v=r(28),w=r(155),_=r(156),y=r(149),S=r(1),T=r(65),N=function(e,t){var r=e.login,n=e.password,i=e.email;return function(){var e=Object(l.a)(u.a.mark((function e(a){var s,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(O.a)({method:"POST",url:"/register",data:{login:r,password:n,email:i}});case 3:s=e.sent,a(Object(T.b)(s.data.message)),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{email:3===(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.code)&&t("i18next.registration.input.errorcode3")});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()};!function(e){e[e.INPUT_STEP=0]="INPUT_STEP",e[e.CONFIRM_STEP=1]="CONFIRM_STEP"}(i||(i={}));var P=(n={},Object(s.a)(n,i.INPUT_STEP,(function(e){var t=e.setStep,r=Object(y.a)().t,n=Object(o.useRef)(),a=Object(x.c)(v.d.inputStage.data),s=Object(x.b)();function c(){return(c=Object(l.a)(u.a.mark((function e(t){var n,i,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.login,i=t.password,a=t.repeatPassword,o=t.email,!(n&&i&&a&&o)){e.next=4;break}if(i!==a){e.next=4;break}return e.abrupt("return",s(N({login:n,password:i,email:o},r)));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(o.useEffect)((function(){a&&(t(i.CONFIRM_STEP),s(Object(T.a)()))}),[a]),Object(o.useEffect)((function(){n.current&&n.current.focus()}),[n.current]),Object(S.jsx)(w.b,{onSubmit:function(e){return c.apply(this,arguments)},validate:function(e){var t={};return e.login||(t.login=r("i18next.registration.input.errorfillall")),e.password||(t.password=r("i18next.registration.input.errorfillall")),e.email||(t.email=r("i18next.registration.input.errorfillall")),e.repeatPassword?e.password!==e.repeatPassword&&(t.repeatPassword=r("i18next.registration.input.errormismatchedpasswords")):t.repeatPassword=r("i18next.registration.input.errorfillall"),e.email&&!/^[\w.]{2,64}@[\w.]{2,16}\.[a-z]{2,3}$/i.test(e.email)&&(t.email=r("i18next.registration.input.errorvalidemail")),e.password&&!/[!?\-&_*]/.test(e.password)&&(t.password="".concat(r("i18next.registration.input.erroratleastoneof")," !,?,-,&,_,*")),e.password&&/(.)\1{2}/.test(e.password)&&(t.password=r("i18next.registration.input.erroridenticalsymbols")),t},subscription:{submitting:!0},render:function(e){var t=e.handleSubmit;return Object(S.jsxs)("form",{className:p.a.form,onSubmit:t,children:[Object(S.jsx)("h3",{className:p.a.formTitle,children:r("i18next.registration.input.title")}),Object(S.jsx)("p",{className:p.a.formText,children:r("i18next.registration.input.informtext")}),Object(S.jsx)(w.c,{subscription:{submitting:!0},render:function(e){var t=e.submitting;return Object(S.jsx)(w.a,{name:"login",component:d.h,inputRef:n,label:r("i18next.registration.input.login"),id:"login",placeholder:r("i18next.registration.input.enterlogin"),disabled:t})}}),Object(S.jsx)(w.c,{subscription:{submitting:!0},render:function(e){var t=e.submitting;return Object(S.jsx)(w.a,{name:"password",component:d.h,label:r("i18next.registration.input.password"),id:"password",placeholder:r("i18next.registration.input.enterpassword"),type:"password",disabled:t})}}),Object(S.jsx)(w.c,{subscription:{submitting:!0},render:function(e){var t=e.submitting;return Object(S.jsx)(w.a,{name:"repeatPassword",component:d.h,label:"".concat(r("i18next.registration.input.repeatpassword"),":"),id:"repeat-password",placeholder:r("i18next.registration.input.repeatpassword"),type:"password",disabled:t})}}),Object(S.jsx)(w.c,{subscription:{submitting:!0},render:function(e){var t=e.submitting;return Object(S.jsx)(w.a,{name:"email",component:d.h,label:"Email:",id:"email",placeholder:r("i18next.registration.input.enteremail"),disabled:t})}}),Object(S.jsx)(w.c,{subscription:{submitting:!0,errors:!0,pristine:!0},render:function(e){var t=e.submitting,n=e.errors,i=e.pristine;return Object(S.jsx)(d.b,{colorScheme:d.c.green,className:p.a.buttonOffset,type:"submit",disabled:i||n.login||n.password||n.repeatPassword||n.email||t,loading:t,children:r("i18next.registration.input.continue")})}}),Object(S.jsx)(m.b,{to:j.a.login.url,className:p.a.cancelLink,children:r("i18next.registration.input.cancel")})]})}})})),Object(s.a)(n,i.CONFIRM_STEP,(function(){var e=Object(o.useRef)(),t=Object(y.a)().t,r=Object(o.useState)(!1),n=Object(a.a)(r,2),i=n[0],s=n[1],c=Object(o.useState)(""),b=Object(a.a)(c,2),O=b[0],T=b[1],N=Object(x.c)(v.d.confirmStage.isReady),P=Object(x.b)();function k(){return(k=Object(l.a)(u.a.mark((function e(r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=r.code)){e.next=5;break}return e.abrupt("return",g({code:n},T,E,t));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(Object(o.useEffect)((function(){e.current&&e.current.focus()}),[e.current]),Object(o.useEffect)((function(){return function(){P(Object(h.a)(!1))}}),[]),N)return Object(S.jsx)(f.a,{to:j.a.login.url});function E(){s(!i)}return Object(S.jsxs)(S.Fragment,{children:[i&&Object(S.jsx)(_.b,{buttonText:"Ok",modalText:O,switchShowPopap:E,handler:function(){E(),P(Object(h.b)())},type:_.a.onlyInformationType}),Object(S.jsx)(w.b,{onSubmit:function(e){return k.apply(this,arguments)},validate:function(e){var r={};return e.code||(r.code=t("i18next.registration.confirm.errorecodeisrequired")),r},subscription:{submitting:!0},render:function(r){var n=r.handleSubmit;return Object(S.jsxs)("form",{className:p.a.form,onSubmit:n,children:[Object(S.jsx)("h3",{className:p.a.formTitle,children:t("i18next.registration.confirm.title")}),Object(S.jsx)("p",{className:p.a.formText,children:t("i18next.registration.confirm.informtext")}),Object(S.jsx)(w.c,{subscription:{submitting:!0},render:function(r){var n=r.submitting;return Object(S.jsx)(w.a,{name:"code",component:d.h,inputRef:e,label:t("i18next.registration.confirm.code"),id:"code-input",placeholder:t("i18next.registration.confirm.entercode"),type:"number",disabled:n})}}),Object(S.jsx)(w.c,{subscription:{submitting:!0,errors:!0,pristine:!0},render:function(e){var r=e.submitting,n=e.errors,i=e.pristine;return Object(S.jsx)(d.b,{colorScheme:d.c.green,className:p.a.buttonOffset,type:"submit",disabled:i||n.code||r,loading:r,children:t("i18next.registration.confirm.continue")})}}),Object(S.jsx)(m.b,{to:j.a.login.url,className:p.a.cancelLink,children:t("i18next.registration.confirm.cancel")})]})}})]})})),n);t.default=function(){var e=Object(o.useState)(i.INPUT_STEP),t=Object(a.a)(e,2),r=t[0],n=t[1],s=P[r];return Object(S.jsx)(s,{setStep:n})}}}]);
//# sourceMappingURL=registration.120b36a0.chunk.js.map