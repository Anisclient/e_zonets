(this.webpackJsonpe_zonets=this.webpackJsonpe_zonets||[]).push([[6],{156:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return n}));r(0);var n,a=r(158),i=r.n(a),s=r(53),o=r(149),c=r(1);!function(e){e[e.onlyInformationType=0]="onlyInformationType",e[e.forBasket=1]="forBasket"}(n||(n={}));var l=function(e){var t=e.modalText,r=e.buttonText,a=e.switchShowPopap,l=e.handler,d=e.type,u=Object(o.a)().t;return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:i.a.modal,children:[Object(c.jsx)("p",{className:i.a.modalText,children:t}),Object(c.jsx)(s.b,{onClick:function(){a(),l()},colorScheme:s.a.blue,className:i.a.buttonOffset,children:r}),d===n.forBasket&&Object(c.jsx)(s.b,{colorScheme:s.a.lightgreen,className:i.a.buttonOffset,onClick:a,children:u("i18next.modalwindow.cancel")})]}),Object(c.jsx)("div",{className:i.a.overlay})]})}},158:function(e,t,r){e.exports={modal:"style_modal__K5xBK",buttonOffset:"style_buttonOffset__1106E",overlay:"style_overlay__3brN4"}},218:function(e,t,r){e.exports={form:"style_form__rY5sA",formTitle:"style_formTitle__G5FbA",buttonOffset:"style_buttonOffset__3j-Zg",or:"style_or__1ERME",orLine:"style_orLine__2ryH7",orText:"style_orText__17IQn",back:"style_back__3JbPN",delivery:"style_delivery__eWXvL"}},219:function(e,t,r){e.exports={label:"style_label__bTbHU",input:"style_input__10mhh",text:"style_text__1yaIY"}},220:function(e,t,r){e.exports={wrapper:"style_wrapper__SLvqc",error:"style_error__31L4p",textarea:"style_textarea__1YSKX",danger:"style_danger__6tNCc"}},229:function(e,t,r){"use strict";r.r(t);var n=r(25),a=r.n(n),i=r(30),s=r(17),o=r(20),c=r(0),l=r(218),d=r.n(l),u=r(6),b=r(23),p=r(7),m=r(9),j=r(155),v=r(2),x=r(40),f=r(219),h=r.n(f),O=r(1);var _=function(e){var t=e.id,r=e.input,n=e.children,a=Object(x.a)(e,["id","input","children"]);return Object(O.jsxs)("label",{className:h.a.label,children:[Object(O.jsx)("input",Object(v.a)(Object(v.a)({id:String(t),className:h.a.input,type:"radio"},r),a)),Object(O.jsx)("div",{className:h.a.text,children:n})]})},y=r(220),g=r.n(y),k=r(10),N=r.n(k),S=function(e){var t=e.input,r=e.meta,n=Object(x.a)(e,["input","meta"]);return Object(O.jsxs)("div",{className:g.a.wrapper,children:[((null===r||void 0===r?void 0:r.error)||(null===r||void 0===r?void 0:r.submitError)&&!(null===r||void 0===r?void 0:r.modifiedSinceLastSubmit))&&(null===r||void 0===r?void 0:r.modified)&&Object(O.jsx)("div",{className:g.a.error,children:(null===r||void 0===r?void 0:r.error)||(null===r||void 0===r?void 0:r.submitError)}),Object(O.jsx)("textarea",Object(v.a)(Object(v.a)({className:N()(g.a.textarea,((null===r||void 0===r?void 0:r.error)||(null===r||void 0===r?void 0:r.submitError)&&!(null===r||void 0===r?void 0:r.modifiedSinceLastSubmit))&&(null===r||void 0===r?void 0:r.modified)&&g.a.danger)},t),n))]})},w=r(38),T=r(156),L=r(149),E=r(63);t.default=function(){var e=Object(L.a)().t,t=Object(c.useRef)(),r=Object(u.g)(),n=Object(c.useState)(!1),l=Object(s.a)(n,2),v=l[0],x=l[1],f=Object(c.useState)(""),h=Object(s.a)(f,2),y=h[0],g=h[1],k=Object(m.c)((function(e){return e.basket.allProducts}));0===Object.keys(k).map((function(e){return k[e].productsById[0]})).length&&r.push("".concat(p.a.main.url));var N=Object(m.b)();function I(){x(!v)}function B(){return(B=Object(i.a)(a.a.mark((function t(r){var n,i,s,o,c,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.name,i=r.phone,s=r.address,!n||!i){t.next=13;break}return t.prev=2,t.next=5,Object(E.a)({method:"POST",url:"/order",data:{name:n,phone:i,address:s||"pickup"}});case 5:o=t.sent,g("".concat(e("i18next.orderpage.messageformodalwindow")).concat(o.data.message)),I(),t.next=13;break;case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",{name:null===t.t0||void 0===t.t0||null===(c=t.t0.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.error});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){t.current&&t.current.focus()}),[t.current]),Object(O.jsxs)(O.Fragment,{children:[v&&Object(O.jsx)(T.b,{buttonText:"Ok",modalText:y,switchShowPopap:I,handler:function(){I(),window.localStorage.removeItem("products-in-basket-local-storage"),N(Object(w.c)())},type:T.a.onlyInformationType}),Object(O.jsx)(j.b,{onSubmit:function(e){return B.apply(this,arguments)},initialValues:{delivery:"pickup"},validate:function(t){var r={};return t.name||(r.name=e("i18next.orderpage.errornameisrequired")),t.phone||(r.phone=e("i18next.orderpage.errorphoneisrequired")),t.phone&&!/^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/.test(t.phone)&&(r.phone=e("i18next.orderpage.errorvalidnumber")),"shipping"!==t.delivery||t.address||(r.address=e("i18next.orderpage.erroraddressisrequired")),r},subscription:{submitting:!0},render:function(r){var n=r.handleSubmit;return Object(O.jsxs)("form",{className:d.a.form,onSubmit:n,children:[Object(O.jsx)("h3",{className:d.a.formTitle,children:e("i18next.orderpage.ordering")}),Object(O.jsx)(j.c,{subscription:{submitting:!0},render:function(r){var n=r.submitting;return Object(O.jsx)(j.a,{name:"name",component:o.h,inputRef:t,label:"".concat(e("i18next.orderpage.name"),":"),id:"name",placeholder:e("i18next.orderpage.enteryourname"),disabled:n})}}),Object(O.jsx)(j.c,{subscription:{submitting:!0},render:function(t){var r=t.submitting;return Object(O.jsx)(j.a,{name:"phone",component:o.h,label:"".concat(e("i18next.orderpage.phone"),":"),id:"phone",placeholder:e("i18next.orderpage.enterphonenumber"),type:"tel",disabled:r})}}),Object(O.jsxs)("div",{className:d.a.or,children:[Object(O.jsx)("span",{className:d.a.orLine}),Object(O.jsx)("span",{className:d.a.orText,children:"".concat(e("i18next.orderpage.obtainingway"),":")}),Object(O.jsx)("span",{className:d.a.orLine})]}),Object(O.jsxs)("div",{className:d.a.delivery,children:[Object(O.jsx)(j.a,{name:"delivery",component:_,type:"radio",value:"pickup",id:"pickup",children:e("i18next.orderpage.pickup")}),Object(O.jsx)(j.a,{name:"delivery",component:_,type:"radio",value:"shipping",id:"shipping",children:e("i18next.orderpage.shipping")})]}),Object(O.jsx)(j.c,{subscription:{values:!0,submitting:!0},render:function(t){var r=t.values,n=t.submitting;return"shipping"===r.delivery&&Object(O.jsx)(j.a,{name:"address",component:S,placeholder:e("i18next.orderpage.enterdeliveryaddress"),disabled:n})}}),Object(O.jsx)(j.c,{subscription:{submitting:!0,errors:!0,pristine:!0,values:!0},render:function(t){var r=t.submitting,n=t.errors,a=t.pristine,i=t.values;return Object(O.jsx)(o.b,{colorScheme:o.c.green,className:d.a.buttonOffset,type:"submit",disabled:r||a||n.name||n.phone||"shipping"===i.delivery&&n.address,loading:r,children:e("i18next.orderpage.continue")})}}),Object(O.jsx)(b.b,{className:d.a.back,to:p.a.basket.url,children:e("i18next.orderpage.back")})]})}})]})}}}]);
//# sourceMappingURL=order-page.8380e9b6.chunk.js.map